<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- ìœ„ 3ê°œì˜ ë©”íƒ€ íƒœê·¸ëŠ” *ë°˜ë“œì‹œ* head íƒœê·¸ì˜ ì²˜ìŒì— ì™€ì•¼í•©ë‹ˆë‹¤; ì–´ë–¤ ë‹¤ë¥¸ ì½˜í…ì¸ ë“¤ì€ ë°˜ë“œì‹œ ì´ íƒœê·¸ë“¤ *ë‹¤ìŒì—* ì™€ì•¼ í•©ë‹ˆë‹¤ -->

    <title>2020_CAP_TEAM8</title>

    <!-- ë¶€íŠ¸ìŠ¤íŠ¸ë© -->
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap core CSS -->
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <!-- link for google fonts-->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet">
    <!-- Custom styles for this template -->
    <link href="/static/css/theme.css" rel="stylesheet">
    <!-- jQuery (ë¶€íŠ¸ìŠ¤íŠ¸ë©ì˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ í”ŒëŸ¬ê·¸ì¸ì„ ìœ„í•´ í•„ìš”í•©ë‹ˆë‹¤) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>


  </head>

  <body role="document">

    <!-- Fixed navbar -->
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="index.html">2020 CAP TEAM 8</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="about.html">About</a></li>
            <li><a href="members.html">Members</a></li>
          </ul>
        </div>
      </div>
    </nav>

<!-- Main jumbotron for a primary marketing message or call to action -->
    <div class="jumbotron">
      <div class="container">
        <h1>Welcome!</h1>
        <p>This is a main page for our project. 
        <br>In this page, you can run our pogram by following the instructions.<br>
        <br>You can see the <mark><strong>detail of our project</strong></mark> by clicking the button below.</p>
        
          <div class="col-md-2">
          </div>
          <div class="col-md-1">
            <center>
              <p>ğŸ‘‡<a class="btn btn-primary btn" href="about.html" role="button">Learn more &raquo;</a></p>
            </center>
          </div>
        
      </div>
    </div>

    <div class="container">
           <div class="row">
        <div class="col-md-5">
          <h1><center>Input your ğŸš— image</center></h1>
          <hr>
          <form id="imageForm" method="POST" enctype="multipart/form-data">
            <div class="form-group">
              <p class="help-block">1. Choose the image file.</p>
              <img id="preview" src="/static/images/preview.jpg" width="500" alt="preview image" align="center" class="img-thumbnail center-block"><br><br>
              <input type="file" id="getfile" name="file" accept="image/*">
              <script> 
                var file = document.querySelector('#getfile');

                file.onchange = function () { 
                    var fileList = file.files ;
                    
                    var reader = new FileReader();
                    reader.readAsDataURL(fileList [0]);

                    reader.onload = function  () {
                        document.querySelector('#preview').src = reader.result;
                    }; 
                }; 
              </script><br>
              <p class="help-block">2. Submit the image file.</p>
            </div>
            <button id = "submitBtn" type="submit" class="btn btn-success btn-lg btn-block">Submit image</button>
          </form>
        </div> 
        <div class="col-md-2">
          <h1><center>â¡</center></h1>        
        </div>
        <div class="col-md-5">
          <h1><center>ğŸ”¢ Result </center></h1>
          <hr>
          <h2>The car plate number is..</h2><br>
          <div class="jumbotron well">
              <h1 id ="result"></h1>
          </div>
        </div>
      </div>
    </div><br>

    <hr><!--line & undertag-->
    <div class="container">
      <footer>
        <p>&copy; KNU CSE 2020 CAP Team 8</p>
      </footer>
    </div>
  <script>
    $("#submitBtn").click(function (event) {

      //preventDefault ëŠ” ê¸°ë³¸ìœ¼ë¡œ ì •ì˜ëœ ì´ë²¤íŠ¸ë¥¼ ì‘ë™í•˜ì§€ ëª»í•˜ê²Œ í•˜ëŠ” ë©”ì„œë“œì´ë‹¤. submitì„ ë§‰ìŒ
      event.preventDefault();

      // Get form
      var form = $('#imageForm')[0];

      // Create an FormData object
      var data = new FormData(form);

      // disabled the submit button

      $.ajax({
        type: "POST",
        enctype: 'multipart/form-data',
        url: "/process/image",
        data: data,
        processData: false,
        contentType: false,
        cache: false,

        timeout: 600000,
        success: function (data) {
            console.log(data)
            var resultTag = document.getElementById("result")
            resultTag.innerHTML = data
            console.log("complete");
        },
        error: function (e) {
            console.log("ERROR : ", e);
        }
      });

    });
  </script>
    <!-- Bootstrap core JavaScript================================================== -->

    <!-- ëª¨ë“  ì»´íŒŒì¼ëœ í”ŒëŸ¬ê·¸ì¸ì„ í¬í•¨í•©ë‹ˆë‹¤ (ì•„ë˜), ì›í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ í•„ìš”í•œ ê°ê°ì˜ íŒŒì¼ì„ í¬í•¨í•˜ì„¸ìš” -->

    <script src="/static/js/bootstrap.min.js"></script>
  </body>
</html>